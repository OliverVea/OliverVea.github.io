<!DOCTYPE html>
<html lang="en-us">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Fuzzy Logic with Fluent Syntax - Oliver Vea</title><meta name="Description" content="Personal DevBlog of Oliver Vea"><meta property="og:url" content="http://localhost:1313/posts/fluent-fuzzy/">
  <meta property="og:site_name" content="Oliver Vea">
  <meta property="og:title" content="Fuzzy Logic with Fluent Syntax">
  <meta property="og:description" content="Overview FluentFuzzy is a .NET package for adding fuzzy logic to a project in an easily readable, fluent way. The project is freely available on Github.
I’ve written an introductory post on fuzzy logic here, which explains the basic concept and how it works.
The project includes four source projects and a test project.
The FluentFuzzy project contains the code for the core logic and fluent syntax builder of the package.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-28T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-08-28T00:00:00+00:00">
    <meta property="article:tag" content="Project">
    <meta property="article:tag" content="Fuzzy Logic">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Fuzzy Logic with Fluent Syntax">
  <meta name="twitter:description" content="Overview FluentFuzzy is a .NET package for adding fuzzy logic to a project in an easily readable, fluent way. The project is freely available on Github.
I’ve written an introductory post on fuzzy logic here, which explains the basic concept and how it works.
The project includes four source projects and a test project.
The FluentFuzzy project contains the code for the core logic and fluent syntax builder of the package.">
<meta name="application-name" content="Oliver Vea Personal DevBlog">
<meta name="apple-mobile-web-app-title" content="Oliver Vea Personal DevBlog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/posts/fluent-fuzzy/" /><link rel="prev" href="http://localhost:1313/posts/fuzzy-logic/" /><link rel="next" href="http://localhost:1313/posts/semantic-search/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Fuzzy Logic with Fluent Syntax",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/posts\/fluent-fuzzy\/"
        },"genre": "posts","keywords": "Project, Fuzzy Logic","wordcount":  637 ,
        "url": "http:\/\/localhost:1313\/posts\/fluent-fuzzy\/","datePublished": "2023-08-28T00:00:00+00:00","dateModified": "2023-08-28T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Oliver Vea"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Oliver Vea"><span class="header-title-pre">< </span>Oliver Vea<span class="header-title-post"> /></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Oliver Vea"><span class="header-title-pre">< </span>Oliver Vea<span class="header-title-post"> /></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Fuzzy Logic with Fluent Syntax</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Oliver Vea</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-08-28">2023-08-28</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;637 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;3 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#using-fluentfuzzy">Using FluentFuzzy</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="overview">Overview</h2>
<p>FluentFuzzy is a .NET package for adding fuzzy logic to a project in an easily readable, fluent way. The project is freely available <a href="https://github.com/OliverVea/FluentFuzzy" target="_blank" rel="noopener noreffer ">on Github</a>.</p>
<p>I&rsquo;ve written an introductory post on fuzzy logic <a href="../fuzzy-logic" rel="">here</a>, which explains the basic concept and how it works.</p>
<p>The project includes four source projects and a test project.</p>
<p>The <a href="https://github.com/OliverVea/FluentFuzzy/tree/main/src/FluentFuzzy" target="_blank" rel="noopener noreffer ">FluentFuzzy</a> project contains the code for the core logic and fluent syntax builder of the package. It has several membership functions, which allow the user to specify exactly how they want the fuzzy system to behave. It&rsquo;s written in a way that allows the user to implement their own membership functions if desired, allowing the user to tailor the package to their needs.</p>
<p>The <a href="https://github.com/OliverVea/FluentFuzzy/tree/main/src/FluentFuzzy.Visualizer" target="_blank" rel="noopener noreffer ">FluentFuzzy.Visualizer</a> project contains code for constructing and visualizing a fuzzy system, as seen in the picture below.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/fluent-fuzzy/FluentFuzzy.Visualizer.png"
        data-srcset="/posts/fluent-fuzzy/FluentFuzzy.Visualizer.png, /posts/fluent-fuzzy/FluentFuzzy.Visualizer.png 1.5x, /posts/fluent-fuzzy/FluentFuzzy.Visualizer.png 2x"
        data-sizes="auto"
        alt="/posts/fluent-fuzzy/FluentFuzzy.Visualizer.png"
        title="Fuzzy logic visualizer and system builder" width="1144" height="555" /></p>
<p>The <a href="https://github.com/OliverVea/FluentFuzzy/tree/main/src/FluentFuzzy.Unity" target="_blank" rel="noopener noreffer ">FluentFuzzy.Unity</a> and <a href="https://github.com/OliverVea/FluentFuzzy/tree/main/src/FluentFuzzy.Unity.Editor" target="_blank" rel="noopener noreffer ">FluentFuzzy.Unity.Editor</a> projects have code for integrating with Unity, with the former project containing the runtime logic and the latter project containing the editor logic. It allows for using a <a href="https://docs.unity3d.com/Manual/EditingCurves.html" target="_blank" rel="noopener noreffer ">Unity Curve</a> as a membership function and editing it directly in the Unity UI.</p>
<p>Lastly, the <a href="https://github.com/OliverVea/FluentFuzzy/tree/main/test/FluentFuzzy.Test" target="_blank" rel="noopener noreffer ">FluentFuzzy.Test</a> project has an example of the fuzzy logic. This example is used in the <a href="https://github.com/OliverVea/FluentFuzzy/blob/main/README.md" target="_blank" rel="noopener noreffer ">README.md</a> file, and is verified in the <code>CI</code> step <a href="https://github.com/OliverVea/FluentFuzzy/blob/main/.github/workflows/test.yml#L16C2-L16C2" target="_blank" rel="noopener noreffer "><code>verify-example</code></a>.</p>
<p>A nuget package is created whenever code is merged to the <code>main</code> branch, but as the project is currently WIP, the nuget package is private. To use the module, please clone the repository and use the source code directly.</p>
<h2 id="using-fluentfuzzy">Using FluentFuzzy</h2>
<p>The syntax when using FluentFuzzy is very simple and natural. Firstly, the fuzzy inputs and outputs are created. The <code>FuzzyInput</code> uses a delegate to sample the current value. This value might be retrieved from the game, from a sensor, from the database or it might be regularly cached for performance.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> angleValue = <span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>FuzzyInput angle = <span style="color:#66d9ef">new</span>(() =&gt; angleValue);
</span></span><span style="display:flex;"><span>FuzzyOutput torque = <span style="color:#66d9ef">new</span>();
</span></span></code></pre></div><p>The membership functions can then be set. The <code>const int</code> values are simply identifiers for the membership functions. They can be named so they are easily identifiable. The membership functions are the same as in the <a href="../fuzzy-logic#what-is-fuzzy-logic" rel="">example from the earlier post</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> veryNegative = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> negative = <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> neutral = <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> positive = <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> veryPositive = <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>angle.Set(veryNegative, <span style="color:#66d9ef">new</span> Line(-<span style="color:#ae81ff">5</span>, -<span style="color:#ae81ff">10</span>));
</span></span><span style="display:flex;"><span>angle.Set(negative, <span style="color:#66d9ef">new</span> Triangle(-<span style="color:#ae81ff">10</span>, -<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>angle.Set(neutral, <span style="color:#66d9ef">new</span> Triangle(-<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>));
</span></span><span style="display:flex;"><span>angle.Set(positive, <span style="color:#66d9ef">new</span> Triangle(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">10</span>));
</span></span><span style="display:flex;"><span>angle.Set(veryPositive, <span style="color:#66d9ef">new</span> Line(<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">10</span>));
</span></span></code></pre></div><p>Similarly, the membership functions for the <code>torque</code> fuzzy output are set.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>torque.Set(veryNegative, <span style="color:#66d9ef">new</span> Triangle(-<span style="color:#ae81ff">150</span>, -<span style="color:#ae81ff">100</span>, -<span style="color:#ae81ff">50</span>));
</span></span><span style="display:flex;"><span>torque.Set(negative, <span style="color:#66d9ef">new</span> Triangle(-<span style="color:#ae81ff">100</span>, -<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>torque.Set(neutral, <span style="color:#66d9ef">new</span> Triangle(-<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">50</span>));
</span></span><span style="display:flex;"><span>torque.Set(positive, <span style="color:#66d9ef">new</span> Triangle(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>));
</span></span><span style="display:flex;"><span>torque.Set(veryPositive, <span style="color:#66d9ef">new</span> Triangle(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">150</span>));
</span></span></code></pre></div><p>The rulebase is built, mapping the input <code>angle</code> parameter to the output <code>torque</code> parameter. Note the very natural and readable syntax for the fuzzy rulebase.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>FuzzyRule.If(angle.Is(veryNegative)).Then(torque.Is(veryNegative));
</span></span><span style="display:flex;"><span>FuzzyRule.If(angle.Is(negative)).Then(torque.Is(negative));
</span></span><span style="display:flex;"><span>FuzzyRule.If(angle.Is(neutral)).Then(torque.Is(neutral));
</span></span><span style="display:flex;"><span>FuzzyRule.If(angle.Is(positive)).Then(torque.Is(positive));
</span></span><span style="display:flex;"><span>FuzzyRule.If(angle.Is(veryPositive)).Then(torque.Is(veryPositive));
</span></span></code></pre></div><p>Lastly, the output can be evaluated. As this code is part of a unit test, the error is compared to a tolerance of <code>0.01</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">float</span> tolerance = <span style="color:#ae81ff">0.01f</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">double</span> expected = <span style="color:#ae81ff">70</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> torqueValue = torque.Evaluate();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> error = Math.Abs(torqueValue - expected);
</span></span><span style="display:flex;"><span>Assert.That(error, Is.LessThan(tolerance));
</span></span></code></pre></div><p>The eagle eyed reader might have noticed that the resulting value is different to the one in the previous article. This is because the defuzzyfication is done slightly different from the centroid method. Here, the centroid of each output is computed seperately and then summed.</p>
<p>For standard centroid defuzzification, the overlap of methods do not contribute to the centroid. This means that the values vary slightly. This way of computing the centroid allow for easier implementation of membership functions and quicker evaluation.</p>
<h2 id="conclusion">Conclusion</h2>
<p>As seen in the code above, the fuzzy logic works as expected. The package is easily integrated into almost any .NET project, so please give it a try!</p>
<p>For any issues, feel free to reach out.</p>
<p>Happy coding!</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-08-28</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://localhost:1313/posts/fluent-fuzzy/" data-title="Fuzzy Logic with Fluent Syntax" data-hashtags="Project,Fuzzy Logic"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://localhost:1313/posts/fluent-fuzzy/" data-hashtag="Project"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="http://localhost:1313/posts/fluent-fuzzy/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="http://localhost:1313/posts/fluent-fuzzy/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://localhost:1313/posts/fluent-fuzzy/" data-title="Fuzzy Logic with Fluent Syntax"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Skype" data-sharer="skype" data-url="http://localhost:1313/posts/fluent-fuzzy/" data-title="Fuzzy Logic with Fluent Syntax"><i class="fab fa-skype fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/project/">Project</a>,&nbsp;<a href="/tags/fuzzy-logic/">Fuzzy Logic</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/fuzzy-logic/" class="prev" rel="prev" title="Introduction to Fuzzy Logic"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Introduction to Fuzzy Logic</a>
            <a href="/posts/semantic-search/" class="next" rel="next" title="Introduction to Semantic Search">Introduction to Semantic Search<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.css"><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"lightgallery":true,"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
